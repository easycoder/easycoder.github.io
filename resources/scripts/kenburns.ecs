!	Ken Burns Effect

	script KenBurns

    div Div
    animation Anim
    variable Spec
    variable AspectW
    variable AspectH
    variable Width
    variable Height
    variable H
    variable Item
    variable Index
    variable Transition
    
    put 16 into AspectW
    put 9 into AspectH
    put `opacity 1s ease-in-out` into Transition
    
    set the elements of Spec to 9
    
    index Spec to 0
    set Spec to object
    set property `type` of Spec to `panzoom`
    set property `width` of Spec to `100%`
    set property `height` of Spec to `100%`
    set property `url` of Spec to `/resources/img/demo0.jpg`
    set property `steps` of Spec to 160
    set property `trigger` of Spec to 120
    set Item to object
    set property `left` of Item to 0
    set property `top` of Item to 0
    set property `width` of Item to 100
    set property `start` of Spec to Item
    set Item to object
    set property `left` of Item to 30
    set property `top` of Item to 32
    set property `width` of Item to 20
    set property `finish` of Spec to Item

    index Spec to 1
    set Spec to object
    set property `type` of Spec to `panzoom`
    set property `width` of Spec to `100%`
    set property `height` of Spec to `100%`
    set property `url` of Spec to `/resources/img/demo1.jpg`
    set property `steps` of Spec to 160
    set property `trigger` of Spec to 120
    set Item to object
    set property `left` of Item to 45
    set property `top` of Item to 20
    set property `width` of Item to 20
    set property `start` of Spec to Item
    set Item to object
    set property `left` of Item to 0
    set property `top` of Item to 0
    set property `width` of Item to 100
    set property `finish` of Spec to Item

    index Spec to 2
    set Spec to object
    set property `type` of Spec to `panzoom`
    set property `width` of Spec to `100%`
    set property `height` of Spec to `100%`
    set property `url` of Spec to `/resources/img/demo2.jpg`
    set property `steps` of Spec to 160
    set property `trigger` of Spec to 120
    set Item to object
    set property `left` of Item to 0
    set property `top` of Item to 10
    set property `width` of Item to 60
    set property `start` of Spec to Item
    set Item to object
    set property `left` of Item to 30
    set property `top` of Item to 10
    set property `width` of Item to 60
    set property `finish` of Spec to Item

    index Spec to 3
    set Spec to object
    set property `type` of Spec to `panzoom`
    set property `width` of Spec to `100%`
    set property `height` of Spec to `100%`
    set property `url` of Spec to `/resources/img/demo3.jpg`
    set property `steps` of Spec to 160
    set property `trigger` of Spec to 120
    set Item to object
    set property `left` of Item to 30
    set property `top` of Item to 37
    set property `width` of Item to 20
    set property `start` of Spec to Item
    set Item to object
    set property `left` of Item to 0
    set property `top` of Item to 0
    set property `width` of Item to 100
    set property `finish` of Spec to Item

    index Spec to 4
    set Spec to object
    set property `type` of Spec to `panzoom`
    set property `width` of Spec to `100%`
    set property `height` of Spec to `100%`
    set property `url` of Spec to `/resources/img/demo4.jpg`
    set property `steps` of Spec to 160
    set property `trigger` of Spec to 120
    set Item to object
    set property `left` of Item to 25
    set property `top` of Item to 5
    set property `width` of Item to 75
    set property `start` of Spec to Item
    set Item to object
    set property `left` of Item to 0
    set property `top` of Item to 5
    set property `width` of Item to 75
    set property `finish` of Spec to Item

    index Spec to 5
    set Spec to object
    set property `type` of Spec to `panzoom`
    set property `width` of Spec to `100%`
    set property `height` of Spec to `100%`
    set property `url` of Spec to `/resources/img/demo5.jpg`
    set property `steps` of Spec to 160
    set property `trigger` of Spec to 120
    set Item to object
    set property `left` of Item to 0
    set property `top` of Item to 5
    set property `width` of Item to 75
    set property `start` of Spec to Item
    set Item to object
    set property `left` of Item to 25
    set property `top` of Item to 5
    set property `width` of Item to 75
    set property `finish` of Spec to Item

    index Spec to 6
    set Spec to object
    set property `type` of Spec to `panzoom`
    set property `width` of Spec to `100%`
    set property `height` of Spec to `100%`
    set property `url` of Spec to `/resources/img/demo6.jpg`
    set property `steps` of Spec to 160
    set property `trigger` of Spec to 120
    set Item to object
    set property `left` of Item to 10
    set property `top` of Item to 20
    set property `width` of Item to 50
    set property `start` of Spec to Item
    set Item to object
    set property `left` of Item to 0
    set property `top` of Item to 0
    set property `width` of Item to 100
    set property `finish` of Spec to Item

    index Spec to 7
    set Spec to object
    set property `type` of Spec to `panzoom`
    set property `width` of Spec to `100%`
    set property `height` of Spec to `100%`
    set property `url` of Spec to `/resources/img/demo7.jpg`
    set property `steps` of Spec to 160
    set property `trigger` of Spec to 120
    set Item to object
    set property `left` of Item to 0
    set property `top` of Item to 0
    set property `width` of Item to 100
    set property `start` of Spec to Item
    set Item to object
    set property `left` of Item to 25
    set property `top` of Item to 25
    set property `width` of Item to 50
    set property `finish` of Spec to Item

    index Spec to 8
    set Spec to object
    set property `type` of Spec to `panzoom`
    set property `width` of Spec to `100%`
    set property `height` of Spec to `100%`
    set property `url` of Spec to `/resources/img/demo8.jpg`
    set property `steps` of Spec to 160
    set property `trigger` of Spec to 120
    set Item to object
    set property `left` of Item to 25
    set property `top` of Item to 5
    set property `width` of Item to 75
    set property `start` of Spec to Item
    set Item to object
    set property `left` of Item to 0
    set property `top` of Item to 5
    set property `width` of Item to 75
    set property `finish` of Spec to Item

!	Get the width and height
    create Div
    set style `margin` of Div to `1em 0 0 5%`
    set style `width` of Div to `90%`
	put the width of Div into Width
    multiply Width by AspectH giving Height
    divide Height by AspectW
    set style `height` of Div to Height cat `px`
    put Height into H
    negate H
    put 0 into H

!	Create the components
    set the elements of Anim to the elements of Spec
    put 0 into Index
    while Index is less than the elements of Spec
    begin
        index Anim to Index
        index Spec to Index
        create Anim in Div
        set style `width` of Anim to `100%`
        set style `height` of Anim to Height cat `px`
        set style `transition` of Anim to Transition
        if Index is not 0
        begin
        	take Height from H
        	set style `top` of Anim to H cat `px`
        	set style `opacity` of Anim to 0
        end
        set the specification of Anim to Spec
        on trigger Anim
        begin
        	set style `opacity` of Anim to 0
        	put the index of Anim into Index
            add 1 to Index
            if Index is the elements of Spec put 0 into Index
            index Anim to Index
            start Anim
        	set style `opacity` of Anim to 1
        end
       	add 1 to Index
    end
    
    wait 2

!	Start the animation
    index Anim to 0
    start Anim
    while true
    begin
    	step Anim
        wait 5 ticks
    end
    stop